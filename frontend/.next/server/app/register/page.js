(()=>{var e={};e.id=11,e.ids=[11],e.modules={47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},65959:(e,r,t)=>{"use strict";t.r(r),t.d(r,{GlobalError:()=>i.a,__next_app__:()=>h,originalPathname:()=>u,pages:()=>c,routeModule:()=>p,tree:()=>d});var s=t(50482),a=t(69108),n=t(62563),i=t.n(n),o=t(68300),l={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>o[e]);t.d(r,l);let d=["",{children:["register",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,86463)),"C:\\Users\\maces\\CernoID-Complete-1\\frontend\\app\\register\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,9421)),"C:\\Users\\maces\\CernoID-Complete-1\\frontend\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,69361,23)),"next/dist/client/components/not-found-error"]}],c=["C:\\Users\\maces\\CernoID-Complete-1\\frontend\\app\\register\\page.tsx"],u="/register/page",h={require:t,loadChunk:()=>Promise.resolve()},p=new s.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/register/page",pathname:"/register",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},35801:(e,r,t)=>{Promise.resolve().then(t.bind(t,89781))},44082:(e,r,t)=>{Promise.resolve().then(t.bind(t,42382))},56694:(e,r,t)=>{Promise.resolve().then(t.t.bind(t,2583,23)),Promise.resolve().then(t.t.bind(t,26840,23)),Promise.resolve().then(t.t.bind(t,38771,23)),Promise.resolve().then(t.t.bind(t,13225,23)),Promise.resolve().then(t.t.bind(t,9295,23)),Promise.resolve().then(t.t.bind(t,43982,23))},89781:(e,r,t)=>{"use strict";t.r(r),t.d(r,{Register:()=>g});var s=t(95344),a=t(3729),n=t(20412),i=t(8428),o=t(72663),l=t(56739),d=t(43584),c=t(65442),u=t(24311),h=t(65183),p=t(44504);let g=()=>{let{register:e}=(0,n.aC)(),[r,t]=(0,a.useState)(!1),[g,f]=(0,a.useState)(null),m=(0,i.useRouter)(),[x,y]=(0,a.useState)({email:"",password:""}),w=e=>{let{name:r,value:t}=e.target;y(e=>({...e,[r]:t}))},v=async r=>{r.preventDefault(),f(null),t(!0);try{await e(x),m.push("/dashboard")}catch(e){f("Registration failed. Please try again.")}finally{t(!1)}};return s.jsx(o.Z,{maxWidth:"sm",children:s.jsx(l.Z,{sx:{mt:8},children:(0,s.jsxs)(d.Z,{sx:{p:4},children:[s.jsx(c.Z,{variant:"h4",component:"h1",gutterBottom:!0,align:"center",children:"Register"}),g&&s.jsx(c.Z,{color:"error",align:"center",gutterBottom:!0,children:g}),(0,s.jsxs)("form",{onSubmit:v,children:[s.jsx(u.Z,{fullWidth:!0,margin:"normal",label:"Email",name:"email",type:"email",value:x.email,onChange:w,disabled:r,required:!0}),s.jsx(u.Z,{fullWidth:!0,margin:"normal",label:"Password",name:"password",type:"password",value:x.password,onChange:w,disabled:r,required:!0}),s.jsx(l.Z,{sx:{mt:3},children:s.jsx(h.Z,{type:"submit",variant:"contained",color:"primary",fullWidth:!0,disabled:r,children:r?s.jsx(p.Z,{size:24}):"Register"})})]})]})})})}},20412:(e,r,t)=>{"use strict";t.d(r,{aC:()=>n});var s=t(3729),a=t(62783);function n(){let e=(0,s.useContext)(a.V);if(!e)throw Error("useAuth must be used within an AuthProvider");return e}t(8428)},62783:(e,r,t)=>{"use strict";t.d(r,{H:()=>o,V:()=>i});var s=t(95344),a=t(3729),n=t(8428);let i=(0,a.createContext)(null);function o({children:e}){let r=(0,n.useRouter)(),[t,o]=(0,a.useState)({user:null,isAuthenticated:!1,isLoading:!0,error:null}),l=e=>{o(r=>({...r,error:e}))},d=async e=>{try{l(null),o(e=>({...e,isLoading:!0})),o(r=>({...r,user:e,isAuthenticated:!0,isLoading:!1})),r.push("/dashboard")}catch(e){throw o(r=>({...r,isLoading:!1,error:e instanceof Error?e.message:"Login failed"})),e}},c=async e=>{try{l(null),o(e=>({...e,isLoading:!0}));let t=await fetch("/api/auth/login/face",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({faceData:e})});if(!t.ok)throw Error("Face recognition login failed");let s=await t.json();if(!s.success||!s.data?.user)throw Error(s.error||"Face recognition login failed");o(e=>({...e,user:s.data.user,isAuthenticated:!0,isLoading:!1})),r.push("/dashboard")}catch(e){throw o(r=>({...r,isLoading:!1,error:e instanceof Error?e.message:"Face recognition login failed"})),e}},u=async e=>{try{l(null),o(e=>({...e,isLoading:!0}));let t=await fetch("/api/auth/register",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(e)});if(!t.ok)throw Error("Registration failed");let s=await t.json();if(!s.success||!s.data?.user)throw Error(s.error||"Registration failed");o(e=>({...e,user:s.data.user,isAuthenticated:!0,isLoading:!1})),r.push("/dashboard")}catch(e){throw o(r=>({...r,isLoading:!1,error:e instanceof Error?e.message:"Registration failed"})),e}},h=async()=>{try{l(null),o(e=>({...e,isLoading:!0})),await fetch("/api/auth/logout",{method:"POST",credentials:"include"}),o({user:null,isAuthenticated:!1,isLoading:!1,error:null}),r.push("/login")}catch(e){o(r=>({...r,isLoading:!1,error:e instanceof Error?e.message:"Logout failed"}))}},p=async e=>{try{l(null),o(e=>({...e,isLoading:!0}));let r=await fetch("/api/auth/reset-password",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({email:e})});if(!r.ok)throw Error("Password reset failed");let t=await r.json();if(!t.success)throw Error(t.error||"Password reset failed");o(e=>({...e,isLoading:!1}))}catch(e){throw o(r=>({...r,isLoading:!1,error:e instanceof Error?e.message:"Password reset failed"})),e}},g=async(e,t,s)=>{try{l(null),o(e=>({...e,isLoading:!0}));let a=await fetch("/api/auth/update-password",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({token:e,password:t,confirmPassword:s})});if(!a.ok)throw Error("Password update failed");let n=await a.json();if(!n.success)throw Error(n.error||"Password update failed");o(e=>({...e,isLoading:!1})),r.push("/login")}catch(e){throw o(r=>({...r,isLoading:!1,error:e instanceof Error?e.message:"Password update failed"})),e}};(0,a.useEffect)(()=>{(async function(){try{let e=await fetch("/api/auth/me",{method:"GET",credentials:"include"});if(!e.ok)throw Error("Authentication check failed");let r=await e.json();r.success&&r.data?.user?o({user:r.data.user,isAuthenticated:!0,isLoading:!1,error:null}):o({user:null,isAuthenticated:!1,isLoading:!1,error:null})}catch(e){o({user:null,isAuthenticated:!1,isLoading:!1,error:e instanceof Error?e.message:"Authentication check failed"})}})()},[]);let f={...t,login:d,loginWithFace:c,register:u,logout:h,resetPassword:p,updatePassword:g};return s.jsx(i.Provider,{value:f,children:e})}},42382:(e,r,t)=>{"use strict";t.r(r),t.d(r,{Providers:()=>h});var s=t(95344),a=t(62783),n=t(69738),i=t(77760);let o=(0,n.Z)({palette:{primary:{main:"#1976d2",light:"#42a5f5",dark:"#1565c0"},secondary:{main:"#9c27b0",light:"#ba68c8",dark:"#7b1fa2"},error:{main:"#d32f2f",light:"#ef5350",dark:"#c62828"},background:{default:"#f5f5f5",paper:"#ffffff"}},typography:{fontFamily:'-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif'},shape:{borderRadius:8},components:{MuiButton:{styleOverrides:{root:{textTransform:"none",fontWeight:600}}},MuiPaper:{styleOverrides:{root:{backgroundImage:"none"}}}}});function l({children:e}){return s.jsx(i.Z,{theme:o,children:e})}var d=t(3729);let c=(0,d.createContext)(null);function u({children:e}){let r=function({url:e="ws://localhost:3000/ws",onMessage:r,onError:t,onClose:s,onOpen:a,reconnectAttempts:n=5,reconnectInterval:i=3e3}={}){let[o,l]=(0,d.useState)(!1),[c,u]=(0,d.useState)(null),[h,p]=(0,d.useState)([]),g=(0,d.useRef)(null),f=(0,d.useRef)(0);return(0,d.useEffect)(()=>{let o=()=>{try{let d=new WebSocket(e);d.onopen=e=>{l(!0),u(null),f.current=0,a?.(e)},d.onmessage=e=>{p(r=>[...r,e.data]);try{let t=JSON.parse(e.data);r?.(t)}catch(t){r?.({type:"raw",data:e.data})}},d.onerror=e=>{u(e),t?.(e)},d.onclose=e=>{l(!1),s?.(e),f.current<n&&setTimeout(()=>{f.current+=1,o()},i)},g.current=d}catch(e){u(e),t?.(e)}};return o(),()=>{g.current&&g.current.close()}},[e,r,t,s,a,n,i]),{isConnected:o,error:c,send:e=>{g.current&&o&&g.current.send("string"==typeof e?e:JSON.stringify(e))},messages:h}}();return s.jsx(c.Provider,{value:r,children:e})}function h({children:e}){return s.jsx(l,{children:s.jsx(a.H,{children:s.jsx(u,{children:e})})})}},9421:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>h,metadata:()=>u});var s=t(25036),a=t(80265),n=t.n(a);t(67272);var i=t(86843);let o=(0,i.createProxy)(String.raw`C:\Users\maces\CernoID-Complete-1\frontend\app\providers\providers.tsx`),{__esModule:l,$$typeof:d}=o;o.default;let c=(0,i.createProxy)(String.raw`C:\Users\maces\CernoID-Complete-1\frontend\app\providers\providers.tsx#Providers`),u={title:"CernoID - Secure Access Control",description:"Advanced facial recognition and access control system"};function h({children:e}){return s.jsx("html",{lang:"en",children:s.jsx("body",{className:n().className,children:s.jsx(c,{children:e})})})}},86463:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>d});var s=t(25036),a=t(86843);let n=(0,a.createProxy)(String.raw`C:\Users\maces\CernoID-Complete-1\frontend\app\components\Auth\Register.tsx`),{__esModule:i,$$typeof:o}=n;n.default;let l=(0,a.createProxy)(String.raw`C:\Users\maces\CernoID-Complete-1\frontend\app\components\Auth\Register.tsx#Register`);function d(){return s.jsx(l,{})}},67272:()=>{}};var r=require("../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),s=r.X(0,[638,961,667,307,610,332,754],()=>t(65959));module.exports=s})();