(()=>{var e={};e.id=165,e.ids=[165],e.modules={47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},13737:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>a.a,__next_app__:()=>h,originalPathname:()=>u,pages:()=>c,routeModule:()=>f,tree:()=>l});var n=r(50482),s=r(69108),o=r(62563),a=r.n(o),i=r(68300),d={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>i[e]);r.d(t,d);let l=["",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.t.bind(r,69361,23)),"next/dist/client/components/not-found-error"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,9421)),"C:\\Users\\maces\\CernoID-Complete-1\\frontend\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,69361,23)),"next/dist/client/components/not-found-error"]}],c=[],u="/_not-found",h={require:r,loadChunk:()=>Promise.resolve()},f=new n.AppPageRouteModule({definition:{kind:s.x.APP_PAGE,page:"/_not-found",pathname:"/_not-found",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:l}})},44082:(e,t,r)=>{Promise.resolve().then(r.bind(r,42382))},56694:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,2583,23)),Promise.resolve().then(r.t.bind(r,26840,23)),Promise.resolve().then(r.t.bind(r,38771,23)),Promise.resolve().then(r.t.bind(r,13225,23)),Promise.resolve().then(r.t.bind(r,9295,23)),Promise.resolve().then(r.t.bind(r,43982,23))},62783:(e,t,r)=>{"use strict";r.d(t,{H:()=>i,V:()=>a});var n=r(95344),s=r(3729),o=r(8428);let a=(0,s.createContext)(null);function i({children:e}){let t=(0,o.useRouter)(),[r,i]=(0,s.useState)({user:null,isAuthenticated:!1,isLoading:!0,error:null}),d=e=>{i(t=>({...t,error:e}))},l=async e=>{try{d(null),i(e=>({...e,isLoading:!0})),i(t=>({...t,user:e,isAuthenticated:!0,isLoading:!1})),t.push("/dashboard")}catch(e){throw i(t=>({...t,isLoading:!1,error:e instanceof Error?e.message:"Login failed"})),e}},c=async e=>{try{d(null),i(e=>({...e,isLoading:!0}));let r=await fetch("/api/auth/login/face",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({faceData:e})});if(!r.ok)throw Error("Face recognition login failed");let n=await r.json();if(!n.success||!n.data?.user)throw Error(n.error||"Face recognition login failed");i(e=>({...e,user:n.data.user,isAuthenticated:!0,isLoading:!1})),t.push("/dashboard")}catch(e){throw i(t=>({...t,isLoading:!1,error:e instanceof Error?e.message:"Face recognition login failed"})),e}},u=async e=>{try{d(null),i(e=>({...e,isLoading:!0}));let r=await fetch("/api/auth/register",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(e)});if(!r.ok)throw Error("Registration failed");let n=await r.json();if(!n.success||!n.data?.user)throw Error(n.error||"Registration failed");i(e=>({...e,user:n.data.user,isAuthenticated:!0,isLoading:!1})),t.push("/dashboard")}catch(e){throw i(t=>({...t,isLoading:!1,error:e instanceof Error?e.message:"Registration failed"})),e}},h=async()=>{try{d(null),i(e=>({...e,isLoading:!0})),await fetch("/api/auth/logout",{method:"POST",credentials:"include"}),i({user:null,isAuthenticated:!1,isLoading:!1,error:null}),t.push("/login")}catch(e){i(t=>({...t,isLoading:!1,error:e instanceof Error?e.message:"Logout failed"}))}},f=async e=>{try{d(null),i(e=>({...e,isLoading:!0}));let t=await fetch("/api/auth/reset-password",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({email:e})});if(!t.ok)throw Error("Password reset failed");let r=await t.json();if(!r.success)throw Error(r.error||"Password reset failed");i(e=>({...e,isLoading:!1}))}catch(e){throw i(t=>({...t,isLoading:!1,error:e instanceof Error?e.message:"Password reset failed"})),e}},p=async(e,r,n)=>{try{d(null),i(e=>({...e,isLoading:!0}));let s=await fetch("/api/auth/update-password",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({token:e,password:r,confirmPassword:n})});if(!s.ok)throw Error("Password update failed");let o=await s.json();if(!o.success)throw Error(o.error||"Password update failed");i(e=>({...e,isLoading:!1})),t.push("/login")}catch(e){throw i(t=>({...t,isLoading:!1,error:e instanceof Error?e.message:"Password update failed"})),e}};(0,s.useEffect)(()=>{(async function(){try{let e=await fetch("/api/auth/me",{method:"GET",credentials:"include"});if(!e.ok)throw Error("Authentication check failed");let t=await e.json();t.success&&t.data?.user?i({user:t.data.user,isAuthenticated:!0,isLoading:!1,error:null}):i({user:null,isAuthenticated:!1,isLoading:!1,error:null})}catch(e){i({user:null,isAuthenticated:!1,isLoading:!1,error:e instanceof Error?e.message:"Authentication check failed"})}})()},[]);let g={...r,login:l,loginWithFace:c,register:u,logout:h,resetPassword:f,updatePassword:p};return n.jsx(a.Provider,{value:g,children:e})}},42382:(e,t,r)=>{"use strict";r.r(t),r.d(t,{Providers:()=>h});var n=r(95344),s=r(62783),o=r(69738),a=r(77760);let i=(0,o.Z)({palette:{primary:{main:"#1976d2",light:"#42a5f5",dark:"#1565c0"},secondary:{main:"#9c27b0",light:"#ba68c8",dark:"#7b1fa2"},error:{main:"#d32f2f",light:"#ef5350",dark:"#c62828"},background:{default:"#f5f5f5",paper:"#ffffff"}},typography:{fontFamily:'-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif'},shape:{borderRadius:8},components:{MuiButton:{styleOverrides:{root:{textTransform:"none",fontWeight:600}}},MuiPaper:{styleOverrides:{root:{backgroundImage:"none"}}}}});function d({children:e}){return n.jsx(a.Z,{theme:i,children:e})}var l=r(3729);let c=(0,l.createContext)(null);function u({children:e}){let t=function({url:e="ws://localhost:3000/ws",onMessage:t,onError:r,onClose:n,onOpen:s,reconnectAttempts:o=5,reconnectInterval:a=3e3}={}){let[i,d]=(0,l.useState)(!1),[c,u]=(0,l.useState)(null),[h,f]=(0,l.useState)([]),p=(0,l.useRef)(null),g=(0,l.useRef)(0);return(0,l.useEffect)(()=>{let i=()=>{try{let l=new WebSocket(e);l.onopen=e=>{d(!0),u(null),g.current=0,s?.(e)},l.onmessage=e=>{f(t=>[...t,e.data]);try{let r=JSON.parse(e.data);t?.(r)}catch(r){t?.({type:"raw",data:e.data})}},l.onerror=e=>{u(e),r?.(e)},l.onclose=e=>{d(!1),n?.(e),g.current<o&&setTimeout(()=>{g.current+=1,i()},a)},p.current=l}catch(e){u(e),r?.(e)}};return i(),()=>{p.current&&p.current.close()}},[e,t,r,n,s,o,a]),{isConnected:i,error:c,send:e=>{p.current&&i&&p.current.send("string"==typeof e?e:JSON.stringify(e))},messages:h}}();return n.jsx(c.Provider,{value:t,children:e})}function h({children:e}){return n.jsx(d,{children:n.jsx(s.H,{children:n.jsx(u,{children:e})})})}},9421:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>h,metadata:()=>u});var n=r(25036),s=r(80265),o=r.n(s);r(67272);var a=r(86843);let i=(0,a.createProxy)(String.raw`C:\Users\maces\CernoID-Complete-1\frontend\app\providers\providers.tsx`),{__esModule:d,$$typeof:l}=i;i.default;let c=(0,a.createProxy)(String.raw`C:\Users\maces\CernoID-Complete-1\frontend\app\providers\providers.tsx#Providers`),u={title:"CernoID - Secure Access Control",description:"Advanced facial recognition and access control system"};function h({children:e}){return n.jsx("html",{lang:"en",children:n.jsx("body",{className:o().className,children:n.jsx(c,{children:e})})})}},67272:()=>{}};var t=require("../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),n=t.X(0,[638,961],()=>r(13737));module.exports=n})();