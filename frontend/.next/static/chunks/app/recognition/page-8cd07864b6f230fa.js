(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[582],{72148:function(e,t,n){Promise.resolve().then(n.bind(n,11077))},11077:function(e,t,n){"use strict";n.r(t),n.d(t,{RecognitionClient:function(){return C}});var i=n(3827),r=n(64090),l=n(54272),s=n(82508),a=n(10470),o=n(66910),c=n(83894),d=n(43206),h=n(29835),x=n(48205),u=n(85195),f=n(95996),m=n(64059),j=n(95749),g=n(44466),Z=n(89900),p=n(86507),b=n(47049),y=n(64200);let k=(0,n(99136).Z)({palette:{primary:{main:"#1976d2",light:"#42a5f5",dark:"#1565c0"},secondary:{main:"#9c27b0",light:"#ba68c8",dark:"#7b1fa2"},error:{main:"#d32f2f",light:"#ef5350",dark:"#c62828"},background:{default:"#f5f5f5",paper:"#ffffff"}},typography:{fontFamily:'-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif'},shape:{borderRadius:8},components:{MuiButton:{styleOverrides:{root:{textTransform:"none",fontWeight:600}}},MuiPaper:{styleOverrides:{root:{backgroundImage:"none"}}}}}),v=e=>{let{imageUrl:t,faces:n,loading:v,error:C,onRefresh:S}=e,R=(0,r.useRef)(null),[w,F]=(0,r.useState)(1),[P,I]=(0,r.useState)(!0),[E,B]=(0,r.useState)(.5),[M,O]=(0,r.useState)(null);(0,r.useEffect)(()=>{if(!t||!R.current)return;let e=R.current,i=e.getContext("2d");if(!i)return;let r=new Image;r.src=t,r.onload=()=>{e.width=r.width*w,e.height=r.height*w,i.clearRect(0,0,e.width,e.height),i.scale(w,w),i.drawImage(r,0,0),n.forEach((e,t)=>{e.confidence>=E&&_(i,e,null!==M&&t===n.indexOf(M))})}},[t,n,w,P,E,M]);let _=(e,t,n)=>{let[i,r,l,s]=t.bbox;e.strokeStyle=n?k.palette.secondary.main:k.palette.primary.main,e.lineWidth=2,e.strokeRect(i,r,l-i,s-r),e.fillStyle=k.palette.background.paper,e.fillRect(i,r-20,70,20),e.fillStyle=k.palette.text.primary,e.font="12px Arial",e.fillText("".concat((100*t.confidence).toFixed(1),"%"),i+5,r-5),P&&t.landmarks&&(e.fillStyle=k.palette.secondary.main,t.landmarks.forEach(t=>{let[n,i]=t;e.beginPath(),e.arc(n,i,2,0,2*Math.PI),e.fill()}))};return(0,i.jsx)(l.Z,{sx:{p:3},children:(0,i.jsxs)(s.ZP,{container:!0,spacing:3,children:[(0,i.jsx)(s.ZP,{item:!0,xs:12,md:8,children:(0,i.jsx)(a.Z,{sx:{p:2,position:"relative",minHeight:400},children:v?(0,i.jsx)(l.Z,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"100%",minHeight:400},children:(0,i.jsx)(o.Z,{})}):C?(0,i.jsx)(c.Z,{severity:"error",action:S&&(0,i.jsx)(d.Z,{color:"inherit",size:"small",onClick:S,children:(0,i.jsx)(Z.Z,{})}),children:C}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(l.Z,{sx:{display:"flex",justifyContent:"space-between",mb:2},children:[(0,i.jsx)(h.Z,{variant:"h6",children:"Recognition Results"}),(0,i.jsxs)(l.Z,{children:[(0,i.jsx)(x.Z,{title:"Zoom Out",children:(0,i.jsx)(d.Z,{onClick:()=>F(e=>Math.max(.5,e-.1)),children:(0,i.jsx)(p.Z,{})})}),(0,i.jsx)(x.Z,{title:"Zoom In",children:(0,i.jsx)(d.Z,{onClick:()=>F(e=>Math.min(2,e+.1)),children:(0,i.jsx)(b.Z,{})})}),(0,i.jsx)(x.Z,{title:"Save Image",children:(0,i.jsx)(d.Z,{onClick:()=>{if(!R.current)return;let e=document.createElement("a");e.download="recognition-results.png",e.href=R.current.toDataURL(),e.click()},children:(0,i.jsx)(y.Z,{})})})]})]}),(0,i.jsx)(l.Z,{sx:{display:"flex",justifyContent:"center",overflow:"auto"},children:(0,i.jsx)("canvas",{ref:R,style:{maxWidth:"100%",height:"auto"},onClick:e=>{var t;let i=null===(t=R.current)||void 0===t?void 0:t.getBoundingClientRect();if(!i)return;let r=(e.clientX-i.left)/w,l=(e.clientY-i.top)/w;O(n.find(e=>{let[t,n,i,s]=e.bbox;return r>=t&&r<=i&&l>=n&&l<=s})||null)}})})]})})}),(0,i.jsxs)(s.ZP,{item:!0,xs:12,md:4,children:[(0,i.jsx)(u.Z,{children:(0,i.jsxs)(f.Z,{children:[(0,i.jsx)(h.Z,{variant:"h6",gutterBottom:!0,children:"Settings"}),(0,i.jsxs)(l.Z,{sx:{mb:3},children:[(0,i.jsx)(h.Z,{gutterBottom:!0,children:"Confidence Threshold"}),(0,i.jsx)(m.ZP,{value:E,onChange:(e,t)=>B(t),min:0,max:1,step:.05,valueLabelDisplay:"auto",valueLabelFormat:e=>"".concat((100*e).toFixed(0),"%")})]}),(0,i.jsx)(j.Z,{control:(0,i.jsx)(g.Z,{checked:P,onChange:e=>I(e.target.checked)}),label:"Show Facial Landmarks"})]})}),M&&(0,i.jsx)(u.Z,{sx:{mt:2},children:(0,i.jsxs)(f.Z,{children:[(0,i.jsx)(h.Z,{variant:"h6",gutterBottom:!0,children:"Face Details"}),(0,i.jsxs)(h.Z,{children:["Confidence: ",(100*M.confidence).toFixed(1),"%"]}),(0,i.jsxs)(h.Z,{children:["Position: (",M.bbox[0],", ",M.bbox[1],")"]}),(0,i.jsxs)(h.Z,{children:["Size: ",M.bbox[2]-M.bbox[0]," x"," ",M.bbox[3]-M.bbox[1]," pixels"]})]})})]})]})})};function C(){let[e]=(0,r.useState)(""),[t]=(0,r.useState)([]);return(0,i.jsx)(v,{imageUrl:e,faces:t,loading:!1,error:void 0,onRefresh:()=>{}})}}},function(e){e.O(0,[463,26,756,355,585,894,508,466,423,653,971,69,744],function(){return e(e.s=72148)}),_N_E=e.O()}]);